.PHONY: build 
.DEFAULT : build


USE_OCAMLFIND = true
#OCAMLFINDFLAGS += -verbose
OCAMLFLAGS += -g -dtypes -warn-error A 

CAMLP4 = camlp4

OCAMLFLAGS += 
	if $(equal $(OSTYPE),Unix)
		value -thread	

# au contraire du reste du build pour lequel on ne retient que les compilations natives,
# ici on veut du byte code pour le preprocesseur, pas du code qui sera linke au binaires livres
BYTE_ENABLED= true
NATIVE_ENABLED=false
OCAMLPACKS= extlib,camlp4

src[]=
	pa_partoches.ml

src=$(file $(src))

LocalOCamlGeneratedFiles(partoches_exn.ml partoches_exn.mli)

partoches_exn.ml : ../partoches_exn.ml
	cat $@ > $@

partoches_exn.mli : ../partoches_exn.mli
	cat $@ > $@

OCAMLDEPFLAGS +=  -syntax camlp4o -ppopt pa_extend.cmo -ppopt q_MLast.cmo -ppopt -loc -ppopt loc
OCAMLFLAGS +=  -syntax camlp4o -ppopt pa_extend.cmo -ppopt q_MLast.cmo -ppopt -loc -ppopt loc
OCAMLPACKS += camlp4

src[]=
	pa_partoches.ml

src= $(file $(src))


build : pa_partoches.cmo pa_partoches.cmi



